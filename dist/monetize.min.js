!function(){function e(){if(s)return s;var e={width:"1px",height:"1px",position:"absolute",top:"-100px"};return s=document.createElement("iframe"),s.setAttribute("style",Object.keys(e).map(function(n){return n+":"+e[n]}).join(";")),document.body.appendChild(s),s.onerror=s.onload=function(){setTimeout(function(){f&&f({error:I})},10)},s}function n(e,n){var t=w+e;return n.q=Date.now(),n=n&&Object.keys(n).map(function(e){return e+"="+encodeURIComponent(n[e])}).join("&"),n?t+"?"+n:t}function t(t,o){f=function(e){f=void 0,o(e)};var i={immediate:!0,response_type:"token",client_id:t.applicationID,redirect_uri:t.redirectURL};k(function(){e().src=n("/authorize",i),clearTimeout(h),h=setTimeout(function(){f&&f({error:z})},_)})}function o(e,n){n.pricingOptions&&n.pricingOptions.length&&(e.pricing_options=n.pricingOptions.join?n.pricingOptions.join(","):n.pricingOptions),n.summary&&(e.summary=!0)}function i(e,t){m=function(e){m=void 0,t(e)};var i={popup:!0,response_type:"token",client_id:e.applicationID,redirect_uri:e.redirectURL};o(i,e);var r={toolbar:"no",location:"no",directories:"no",status:"no",menubar:"no",scrollbars:"no",resizable:"no",copyhistory:"no",width:b,height:g,left:(screen.width-b)/2,top:(screen.height-g)/2};window.open(n("/authorize",i),void 0,Object.keys(r).map(function(e){return e+"="+r[e]}).join(","))}function r(){return p&&document.body.removeChild(p),p=document.createElement("script"),p.onerror=p.onload=function(){setTimeout(function(){l&&l({error:I})},10)},document.body.appendChild(p),p}function c(e){l=function(n){l=void 0,e(n)};var t={access_token:v.token,callback:"_monetizeJsonpCallback"};k(function(){r().src=n("/api/payments",t),clearTimeout(y),y=setTimeout(function(){l&&l({error:z})},_)})}function u(e){var t={redirect:!0,response_type:"token",client_id:e.applicationID,redirect_uri:e.redirectURL};o(t,e),window.location=n("/authorize",t)}function a(e,n){for(var t in n)e[t]=n[t]}function d(e){function n(e){return function(n,t){"function"==typeof n&&(t=n,n={});var i={};a(i,o),a(i,n||{}),e(i,t)}}var o={};a(o,T),a(o,e||{});var r={};return r.getTokenImmediate=n(function(e,n){return v&&v.token&&v.refreshDate>Date.now()?n(void 0,v.token):void t(e,function(e){n(e.error,e.token)})}),r.getPaymentsImmediate=n(function(e,n){return v&&v.token&&v.refreshDate>Date.now()?c(function(e){n(e.error,e.payments)}):void t(e,function(e){n(e.error,e.payments)})}),r.getTokenInteractive=n(function(e,n){return n?void i(e,function(e){n(e.error,e.token)}):u(e)}),r.getPaymentsInteractive=n(function(e,n){return n?void i(e,function(e){n(e.error,e.payments)}):u(e)}),r}var s,p,f,m,l,v,h,y,k=function(){var e,n=[],t=/^loaded|c/.test(document.readyState),o="DOMContentLoaded";return document.addEventListener(o,e=function(){for(document.removeEventListener(o,e,!1),t=1;e=n.shift();)e()},!1),function(e){t?e():n.push(e)}}(),w="https://monetizejs.com",b=1e3,g=700,_=3e4,D=3e5,z="Request timeout",I="Please check your JS console";window.addEventListener("message",function(e){e.origin==w&&(v=e.data,v.expiresIn&&(v.refreshDate=Date.now()+v.expiresIn-D),v.popup?m&&m(v):(clearTimeout(h),f&&f(v)))}),window._monetizeJsonpCallback=function j(e){return window._monetizeJsonpCallback!==j?l&&l({error:"Callback replaced!"}):(clearTimeout(y),void(l&&l({payments:e})))};var T={redirectURL:window.location.href};window.MonetizeJS=d,"function"==typeof define&&define.amd&&define("MonetizeJS",[],function(){return d})}();